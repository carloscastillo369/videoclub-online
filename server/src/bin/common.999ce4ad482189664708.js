"use strict";(self.webpackChunkapp_videoclub=self.webpackChunkapp_videoclub||[]).push([[592],{3062:(P,O,r)=>{r.d(O,{l:()=>g});var t=r(2340),a=r(7716),M=r(1841);let g=(()=>{class l{constructor(i){this.http=i,this.URL_BASE=t.N.production?"":"http://localhost:8080",this.urlAPI=this.URL_BASE+"/api/products/"}getMovie(i){return this.http.get(this.urlAPI+(i||""))}saveMovie(i){return this.http.post(this.urlAPI,i)}updateMovie(i,_){return this.http.put(this.urlAPI+_,i)}deleteMovie(i){return this.http.delete(this.urlAPI+i)}}return l.\u0275fac=function(i){return new(i||l)(a.LFG(M.eN))},l.\u0275prov=a.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},5244:(P,O,r)=>{r.d(O,{U:()=>v});var t=r(7716),a=r(2789);function M(e,o){1&e&&(t.TgZ(0,"th",14),t._uU(1," No. "),t.qZA())}function g(e,o){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const n=o.$implicit,s=t.oxw();t.xp6(1),t.hij(" ",s.orders.indexOf(n)+1," ")}}function l(e,o){1&e&&(t.TgZ(0,"th",14),t._uU(1," Descripci\xf3n "),t.qZA())}function u(e,o){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.title,"")}}function i(e,o){1&e&&(t.TgZ(0,"th",14),t._uU(1," D\xedas "),t.qZA())}function _(e,o){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(n.days)}}function p(e,o){1&e&&(t.TgZ(0,"th",17),t._uU(1," Precio "),t.qZA())}function f(e,o){if(1&e&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(n.price.toFixed(2))}}function E(e,o){1&e&&(t.TgZ(0,"th",17),t._uU(1," Sub-Total "),t.qZA())}function T(e,o){if(1&e&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu((n.price*n.days).toFixed(2))}}function C(e,o){1&e&&t._UZ(0,"tr",19)}function d(e,o){1&e&&t._UZ(0,"tr",20)}let v=(()=>{class e{constructor(){this.displayedColumns=["posicion","descripcion","d\xedas","precio","subtotal"]}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-orders-table"]],inputs:{orders:"orders"},decls:19,vars:3,consts:[[1,"table-container"],["mat-table","",1,"table-content",3,"dataSource"],["matColumnDef","posicion"],["mat-header-cell","",4,"matHeaderCellDef"],["class","cell-center","mat-cell","",4,"matCellDef"],["matColumnDef","descripcion"],["mat-cell","",4,"matCellDef"],["matColumnDef","d\xedas"],["matColumnDef","precio"],["class","cell-right","mat-header-cell","",4,"matHeaderCellDef"],["class","cell-right","mat-cell","",4,"matCellDef"],["matColumnDef","subtotal"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"cell-center"],["mat-cell",""],["mat-header-cell","",1,"cell-right"],["mat-cell","",1,"cell-right"],["mat-header-row",""],["mat-row",""]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"table",1),t.ynx(2,2),t.YNc(3,M,2,0,"th",3),t.YNc(4,g,2,1,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,l,2,0,"th",3),t.YNc(7,u,2,1,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,i,2,0,"th",3),t.YNc(10,_,2,1,"td",4),t.BQk(),t.ynx(11,8),t.YNc(12,p,2,0,"th",9),t.YNc(13,f,2,1,"td",10),t.BQk(),t.ynx(14,11),t.YNc(15,E,2,0,"th",9),t.YNc(16,T,2,1,"td",10),t.BQk(),t.YNc(17,C,1,0,"tr",12),t.YNc(18,d,1,0,"tr",13),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("dataSource",s.orders),t.xp6(16),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns))},directives:[a.BZ,a.w1,a.fO,a.Dz,a.as,a.nj,a.ge,a.ev,a.XQ,a.Gk],styles:[".table-container[_ngcontent-%COMP%]{width:100%;overflow-x:scroll}.table-content[_ngcontent-%COMP%]{min-width:580px;margin-bottom:20px}.mat-header-cell[_ngcontent-%COMP%]{text-align:center;font-weight:bold}.cell-right[_ngcontent-%COMP%]{text-align:right}.cell-center[_ngcontent-%COMP%]{text-align:center}@media (min-width: 600px){.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table-content[_ngcontent-%COMP%]{width:100%}}"]}),e})()},2718:(P,O,r)=>{r.d(O,{i:()=>d});var t=r(9773),a=r(8002),M=r(5435),g=r(3190),l=r(8259),u=r.n(l),i=r(5887),_=r(9667),p=r(961),f=r(7716),E=r(3062),T=r(7556),C=r(6983);let d=(()=>{class v{constructor(o,n,s,m){this.actions$=o,this._apiMovieService=n,this._authService=s,this.router=m,this.loadMovies$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(p.Qb),(0,t.zg)(c=>this._apiMovieService.getMovie().pipe((0,a.U)(h=>p.le({movies:h})))))),this.addMovie$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(p.dO),(0,t.zg)(c=>this._apiMovieService.saveMovie(c.movie).pipe((0,a.U)(h=>p.be({movie:h})))))),this.addMovieRedirect$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(p.be),(0,a.U)(c=>{u().fire({position:"top-end",icon:"success",title:"Nueva pel\xedcula agregada",showConfirmButton:!1,timer:1500}),this.router.navigate(["/admin/list"])})),{dispatch:!1}),this.updateMovie$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(p.u8),(0,t.zg)(c=>this._apiMovieService.updateMovie(c.movie,c.id).pipe((0,a.U)(h=>p.TY({movie:h})))))),this.updateMovieRedirect$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(p.TY),(0,a.U)(c=>{u().fire({position:"top-end",icon:"success",title:"Pel\xedcula actualizada",showConfirmButton:!1,timer:1500}),this.router.navigate(["/admin/list"])})),{dispatch:!1}),this.deleteMovie$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(p.fx),(0,t.zg)(c=>this._apiMovieService.deleteMovie(c.id).pipe((0,a.U)(h=>p.RE({id:c.id})))))),this.getSingleMovie$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(_.tE),(0,M.h)(c=>{var h;const D=this._authService.getDataUserFromLocalStorage(),U=null===(h=null==D?void 0:D.dataUser)||void 0===h?void 0:h.isadmin;return c.payload.routerState.url.startsWith(U?"/admin/list/update":"/public/detailmovie")}),(0,a.U)(c=>c.payload.routerState.params.id),(0,g.w)(c=>this._apiMovieService.getMovie(c).pipe((0,a.U)(h=>p.le({movies:h}))))))}}return v.\u0275fac=function(o){return new(o||v)(f.LFG(i.eX),f.LFG(E.l),f.LFG(T.e),f.LFG(C.F0))},v.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac}),v})()},6927:(P,O,r)=>{r.d(O,{F:()=>C});var t=r(9773),a=r(8002),M=r(5435),g=r(3190),l=r(5887),u=r(1146),i=r(9667),_=r(7716),p=r(2340),f=r(1841);let E=(()=>{class d{constructor(e){this.http=e,this.URL_BASE=p.N.production?"":"http://localhost:8080",this.urlAPI=this.URL_BASE+"/api/orders/"}getOrder(e){return this.http.get(this.urlAPI+(e||""))}saveOrder(e,o){return this.http.post(this.urlAPI,{user:e,order:o})}getMyOrders(e){return this.getOrder().pipe((0,a.U)(o=>{const n=[];return o.forEach(s=>{if(e==s.user.email){let m={total:this.CalcTotal(s.order),order:s.order};n.push(m)}}),n}))}CalcTotal(e){let o=0;return e.forEach(n=>{o+=n.days*n.price}),o}}return d.\u0275fac=function(e){return new(e||d)(_.LFG(f.eN))},d.\u0275prov=_.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();var T=r(7556);let C=(()=>{class d{constructor(e,o,n){this.actions$=e,this._ordeService=o,this._authService=n,this.loadOrders$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(u.sP),(0,t.zg)(s=>this._ordeService.getOrder().pipe((0,a.U)(m=>u.v7({orders:m})))))),this.addOrder$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(u.fS),(0,t.zg)(s=>this._ordeService.saveOrder(s.user,s.order).pipe((0,a.U)(m=>u.MS({order:m})))))),this.getSingleOrder$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(i.tE),(0,M.h)(s=>s.payload.routerState.url.startsWith("/admin/orders/orderdetail")),(0,a.U)(s=>s.payload.routerState.params.id),(0,g.w)(s=>this._ordeService.getOrder(s).pipe((0,a.U)(m=>u.v7({orders:m})))))),this.loadMyOrders$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(u.H9),(0,t.zg)(s=>{const c=this._authService.getDataUserFromLocalStorage().email;return this._ordeService.getMyOrders(c).pipe((0,a.U)(h=>u.RF({myorders:h})))})))}}return d.\u0275fac=function(e){return new(e||d)(_.LFG(l.eX),_.LFG(E),_.LFG(T.e))},d.\u0275prov=_.Yz7({token:d,factory:d.\u0275fac}),d})()}}]);